___INFO___

{
  "displayName": "Uptrends RUM",
  "description": "Uptrends Realtime User Monitoring (RUM)",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "displayName": "This tag allows you to add the Uptrends RUM tracking code as described: https://www.uptrends.com/support/academy/real-user-monitoring/understanding-real-user-monitoring",
    "name": "Description",
    "type": "LABEL"
  },
  {
    "help": "sid is the unique value from your code",
    "valueValidators": [
      {
        "errorMessage": "The Pixel ID is required for Adcrowd to work",
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "sid",
    "simpleValueType": true,
    "name": "sid",
    "type": "TEXT"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://hit.uptrendsdata.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_urconfig"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//var log = require('logToConsole');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');

const _urconfig = {};
_urconfig.sid = data.sid;
_urconfig.aip = 0;
_urconfig.usePageProtocol = false;

setInWindow('_urconfig', _urconfig, true);

const trackingUrl = "https://hit.uptrendsdata.com/rum.min.js";
injectScript(trackingUrl, data.gtmOnSuccess,data.gtmOnFailure);

//log('script =', trackingUrl);
//log('_urconfig =', _urconfig);


___NOTES___

Created on 6/19/2019, 1:41:21 PM
